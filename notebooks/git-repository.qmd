---
title: "Repositories"
editor: source
---


```{r, echo = FALSE}
source("./R/init.R")
log_info("Called git-repository notebook")
```

## Git repositories

A repository is the most basic component of git. 
It is where you store your files and each files history.
Through a variety of mechanisms, repositories can be public or private, can involve single people or multiple collaborators and can be stored locally (on your personal computer), in the cloud (in the cloud hosted by a service provider like github) or on a physical server (a basic file server will suffice in most cases).

Using git, you can create and configure repositories, add or remove files and review history of the files in the repository.

### Initialisation

Let's initialise a new repository.
Run the following on your machine:

```{bash, eval = FALSE, engine = "sh"}
# Change dir to the local workshop directory, 
# e.g. cd ~/Documents/get-going-with-git
mkdir first-repo

cd first-repo

git init
## Initialized empty Git repository in /Users/mark/Documents/project/misc-stats/first-repo/.git/
git status
## On branch main
## 
## No commits yet
## 
## nothing to commit (create/copy files and use "git add" to track)

```

If you received the output detailed above (or something very similar to it) then congratulations, you initialised a git repository.

If you have configured your file explorer to show hidden files, you will notice that the `first-repo` directory now contains a `.git` sub-directory.
This directory contains the everything related to the repository.
For examples, it contains all the version history and allows you to access files at any stage in their development.
Generally, you will not touch this sub-directory directly.

:::callout-note
You can also create a repository from a pre-existing directory that has already got an established file structure and files.
The process is exactly the same, just change to the directory that you want to add to version control, and run `git init`.

Additionally, when you create a new project in Rstudio, you can select to initialise a new git repository.
Underneath the covers, RStudio is simply invoking `git init`.
:::

### Repository structures {#sec-repo-struct}

Before we start adding files to the new repository, you need to be aware of a few concepts.

There are three main structures within the repository:

1. Working directory
2. Staging area
3. Commit history

![Repository structures](../fig/repos-structs.jpg)

#### Working directory

Is the usual files and sub-directories within your project directory.
You add, update, rename, delete files and direcotries in this area.
When you first create a file or directory within the working directory, it is not yet under version control.
Such files are referred to as *untracked files*.

#### Staging area

Is a special space to where you list the files that are added to be committed as a new version under version control.

#### Commit history

After staging files, they are committed to the repository.
Once committed, files (and directories) are under version control and are referred to as *tracked files*.
A commit is simply a version, but you could also think of it as a transaction with the repository.
Changes to committed files are monitored and new updates to files can be committed to the repository as work on the project progresses.
Every time you commit files, the *commit history* is saved.

